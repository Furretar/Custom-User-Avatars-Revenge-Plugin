(function(a,l,$){"use strict";const o="[custom-avatars]",n="376407743776686094",c="https://i.imgur.com/5uUZQVv.png";let g,U;function f(){console.log(`${o} loaded`),console.log(`${o} Target ID: ${n}`),console.log(`${o} Override URL: ${c}`);const r=l.findByStoreName("UserStore");if(!r){console.log(`${o} UserStore not found`);return}const m=r.getUser(n);console.log(`${o} Target user from store:`,m);const t=l.findByProps("getUserAvatarURL");if(!t){console.log(`${o} Avatar module not found`);return}console.log(`${o} Found avatar module:`,Object.keys(t)),console.log(`${o} getUserAvatarURL type:`,typeof t.getUserAvatarURL);const p=t.getUserAvatarURL;t.getUserAvatarURL=function(e,s,d){const u=e?.id,i=e?.username;return u===n?(console.log(`${o} \u2705 MATCH! Returning custom avatar for ${i} (${u})`),console.log(`${o} Arguments - animated: ${s}, size: ${d}`),console.log(`${o} Returning URL: ${c}`),c):(Math.random()<.01&&console.log(`${o} Other user: ${i} (${u})`),p(e,s,d))},g=$.before("getUserAvatarURL",t,function(e){const[s]=e;s?.id===n&&console.log(`${o} [before patch] Intercepted for target user`)}),console.log(`${o} Successfully patched getUserAvatarURL`);try{r.getUser&&(console.log(`${o} Attempting to trigger user update...`),r.getUser(n))}catch(e){console.log(`${o} Error triggering update:`,e)}}function v(){console.log(`${o} unloaded`),g&&(g(),console.log(`${o} Removed before patch`)),l.findByProps("getUserAvatarURL")&&U&&console.log(`${o} Attempting to restore original function`)}return a.onLoad=f,a.onUnload=v,a})({},vendetta.metro,vendetta.patcher);
