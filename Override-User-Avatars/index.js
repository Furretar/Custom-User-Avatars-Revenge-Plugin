(function(g,d){"use strict";const e="[custom-avatars]",s="376407743776686094",l="https://cdn.discordapp.com/attachments/1239712651710435348/1462042785979826306/furina2.png?ex=696cc0f3&is=696b6f73&hm=76a27d1fd87da7033fce3f973630d8277aba24237e45eef332d3bd63400873b0";let a=[];function v(){console.log(`${e} loaded`),console.log(`${e} Target ID: ${s}`),console.log(`${e} Override URL: ${l}`);const n=d.findByStoreName("UserStore");if(!n){console.log(`${e} UserStore not found`);return}const i=n.getUser(s);console.log(`${e} Target user:`,i?.username,i?.id);const o=d.findByProps("getUserAvatarURL");if(!o){console.log(`${e} Avatar module not found`);return}console.log(`${e} Found functions:`,Object.keys(o).filter(function(t){return t.includes("Avatar")}));const f=o.getUserAvatarURL;if(o.getUserAvatarURL=function(...t){const r=t[0];return console.log(`${e} [getUserAvatarURL] called for:`,r?.username,r?.id),r?.id===s?(console.log(`${e} \u2705 MATCH in getUserAvatarURL! Returning custom URL`),l):f.apply(this,t)},a.push(function(){o.getUserAvatarURL=f}),o.getUserAvatarSource){const t=o.getUserAvatarSource;o.getUserAvatarSource=function(...r){const c=r[0];return console.log(`${e} [getUserAvatarSource] called for:`,c?.username,c?.id),c?.id===s?(console.log(`${e} \u2705 MATCH in getUserAvatarSource! Returning custom source`),{uri:l}):t.apply(this,r)},a.push(function(){o.getUserAvatarSource=t}),console.log(`${e} Patched getUserAvatarSource`)}if(o.getGuildMemberAvatarSource){const t=o.getGuildMemberAvatarSource;o.getGuildMemberAvatarSource=function(...r){const[c,u]=r;return console.log(`${e} [getGuildMemberAvatarSource] called for userId:`,u),u===s?(console.log(`${e} \u2705 MATCH in getGuildMemberAvatarSource! Returning custom source`),{uri:l}):t.apply(this,r)},a.push(function(){o.getGuildMemberAvatarSource=t}),console.log(`${e} Patched getGuildMemberAvatarSource`)}const U=n.getUser;n.getUser=function(t){const r=U.call(this,t);return t===s&&r?(console.log(`${e} [UserStore.getUser] Intercepted target user, modifying avatar`),new Proxy(r,{get(c,u){return u==="avatar"?(console.log(`${e} Returning modified avatar hash`),"custom_override_hash"):c[u]}})):r},a.push(function(){n.getUser=U}),console.log(`${e} All patches applied!`),setTimeout(function(){console.log(`${e} Testing if patches work...`);const t=o.getUserAvatarURL(i,!1,128);if(console.log(`${e} Test URL result:`,t),o.getUserAvatarSource){const r=o.getUserAvatarSource(i,!1,128);console.log(`${e} Test source result:`,r)}},1e3)}function A(){console.log(`${e} unloading...`),a.forEach(function(n){return n()}),a=[],console.log(`${e} unloaded`)}return g.onLoad=v,g.onUnload=A,g})({},vendetta.metro);
